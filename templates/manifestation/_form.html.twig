{{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}

<div class="row g-2">
    {# 書誌情報の基本セクション #}
    <div class="col-md-12">
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-book me-1"></i>基本情報</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-2">
                    <div class="col-md-6">
                        {{ form_label(form.title, 'タイトル', {'label_attr': {'class': 'form-label small mb-0 required fw-bold text-danger'}}) }}
                        {{ form_widget(form.title, {'attr': {'class': 'form-control form-control-sm border-danger', 'placeholder': 'タイトルを入力（必須）'}}) }}
                        {% if not form.title.vars.valid %}
                            <div class="invalid-feedback d-block">
                                {{ form_errors(form.title) }}
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        {{ form_label(form.title_transcription, 'タイトル読み', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.title_transcription, {'attr': {'class': 'form-control form-control-sm', 'placeholder': 'タイトルの読み'}}) }}
                    </div>
                    <div class="col-md-6">
                        {{ form_label(form.identifier, '識別子 (ISBN等)', {'label_attr': {'class': 'form-label small mb-0 required fw-bold text-danger'}}) }}
                        {{ form_widget(form.identifier, {'attr': {'class': 'form-control form-control-sm border-danger', 'placeholder': '例：978-4-XXXX-XXXX-X（必須）'}}) }}
                        {% if not form.identifier.vars.valid %}
                            <div class="invalid-feedback d-block">
                                {{ form_errors(form.identifier) }}
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        {{ form_label(form.description, '説明', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.description, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '説明やメモ', 'rows': 1}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        {# 外部識別子セクション #}
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-fingerprint me-1"></i>外部識別子</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-1">
                    <div class="col-12">
                        {{ form_label(form.external_identifier1, '外部識別子 1', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.external_identifier1, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '外部識別子1'}}) }}
                    </div>
                    <div class="col-12">
                        {{ form_label(form.external_identifier2, '外部識別子 2', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.external_identifier2, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '外部識別子2'}}) }}
                    </div>
                    <div class="col-12">
                        {{ form_label(form.external_identifier3, '外部識別子 3', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.external_identifier3, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '外部識別子3'}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# 情報源と貢献者セクション #}
    <div class="col-md-4">
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-info-circle me-1"></i>情報源と貢献者</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-1">
                    <div class="col-12">
                        {{ form_label(form.record_source, '情報源', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.record_source, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '例：NDL, ISBN等'}}) }}
                    </div>
                    <div class="col-12">
                        {{ form_label(form.contributor1, '貢献者 1', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.contributor1, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '著者・出版社など'}}) }}
                    </div>
                    <div class="col-12">
                        {{ form_label(form.contributor2, '貢献者 2', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.contributor2, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '著者・出版社など'}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# 購入情報セクション #}
    <div class="col-md-4">
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-shopping-cart me-1"></i>購入情報</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-1">
                    <div class="col-6">
                        {{ form_label(form.buyer, '購入者', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.buyer, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '購入者名'}}) }}
                    </div>
                    <div class="col-6">
                        {{ form_label(form.buyer_identifier, '購入者ID', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.buyer_identifier, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '購入者ID'}}) }}
                    </div>
                    <div class="col-12">
                        {{ form_label(form.purchase_date, '購入日', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.purchase_date, {'attr': {'class': 'form-control form-control-sm'}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# 分類情報セクション #}
    <div class="col-md-6">
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-tags me-1"></i>分類情報</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-1">
                    <div class="col-md-3">
                        {{ form_label(form.type1, '分類 1', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.type1, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '分類1'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.type2, '分類 2', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.type2, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '分類2'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.type3, '分類 3', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.type3, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '分類3'}}) }}
                    </div>
                    <div class="col-md-3">
                        {{ form_label(form.type4, '分類 4', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.type4, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '分類4'}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# 配置場所セクション #}
    <div class="col-md-6">
        <div class="card shadow-sm mb-2">
            <div class="card-header bg-light py-1">
                <h3 class="card-title h6 mb-0"><i class="fas fa-map-marker-alt me-1"></i>配置場所</h3>
            </div>
            <div class="card-body py-2">
                <div class="row g-1">
                    <div class="col-md-6">
                        {{ form_label(form.location1, '配置場所 1', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.location1, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '配置場所1'}}) }}
                    </div>
                    <div class="col-md-6">
                        {{ form_label(form.location2, '配置場所 2', {'label_attr': {'class': 'form-label small mb-0'}}) }}
                        {{ form_widget(form.location2, {'attr': {'class': 'form-control form-control-sm', 'placeholder': '配置場所2'}}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="alert alert-info mt-2 py-1 small">
    <i class="fas fa-info-circle me-1"></i> <span class="text-danger fw-bold">赤字のラベル</span>は必須項目です。
</div>

<div class="d-grid gap-2 d-md-flex justify-content-md-end mt-2">
    <button class="btn btn-primary btn-sm">
        <i class="fas fa-save me-1"></i>
        {{ button_label|default('保存') }}
    </button>
</div>

{{ form_end(form) }}